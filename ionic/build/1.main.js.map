{"version":3,"sources":["../../src/pages/home-weather/home-weather.module.ts","../../src/components/components.module.ts","../../src/components/index.ts","../../src/components/weather-list/weather-list.ts","../../src/pages/home-weather/home-weather.ts"],"names":[],"mappings":"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","file":"1.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HomeWeatherPage } from './home-weather';\nimport { ComponentsModule } from '../../components';\n\n@NgModule({\n  declarations: [\n    HomeWeatherPage\n  ],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(HomeWeatherPage)\n  ],\n  exports: [\n    HomeWeatherPage\n  ]\n})\nexport class HomeWeatherPageModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home-weather/home-weather.module.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from 'ionic-angular';\nimport { WeatherListComponent } from './weather-list/weather-list';\n\n@NgModule({\n  declarations: [\n    WeatherListComponent\n  ],\n  imports: [\n    CommonModule,\n    IonicModule\n  ],\n  exports: [\n    WeatherListComponent\n  ]\n})\nexport class ComponentsModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","export { ComponentsModule } from './components.module';\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/index.ts","import { Component, EventEmitter, Input, OnDestroy, OnInit } from '@angular/core';\nimport { NavController } from 'ionic-angular';\nimport {\n  CONFIG,\n  DatabaseService,\n  DataPoint,\n  DEFAULT_METRICS,\n  Forecast,\n  ForecastService,\n  Location,\n  Metrics,\n  UtilService\n} from '../../providers';\nimport { Subscription } from 'rxjs/Subscription';\nimport * as _ from 'lodash';\n\n@Component({\n  selector: 'weather-list',\n  templateUrl: 'weather-list.html'\n})\nexport class WeatherListComponent implements OnInit, OnDestroy {\n  @Input() onInitEmitter: EventEmitter<string>;\n  @Input() onDestroyEmitter: EventEmitter<string>;\n  @Input() location: Location;\n  forecast: Forecast;\n  metrics: Metrics;\n  todayForecast: DataPoint;\n  forecastSubscriber: Subscription;\n  hourlyArray: Array<{\n    time: number,\n    icon: string,\n    temperature: number\n  }> = [];\n\n  constructor(public navCtrl: NavController,\n              public forecastService: ForecastService,\n              public databaseService: DatabaseService,\n              public utilService: UtilService) {\n  }\n\n  itemClicked(item: any) {\n    this.navCtrl.push('WeatherDetailPage', {\n      forecast: this.forecast,\n      currentForecast: item,\n      currentLocation: this.location,\n      metrics: this.metrics\n    });\n  }\n\n  ngOnInit() {\n    //these emitters are used to programmatically activate lifecycle events\n    //because in Ionic 2, changing tabs doesn't activate lifecycle of templates\n    if (this.onInitEmitter) {\n      this.onInitEmitter.subscribe(() => this.init());\n    }\n    if (this.onDestroyEmitter) {\n      this.onDestroyEmitter.subscribe(() => this.destroy());\n    }\n    this.init();\n  }\n\n  init() {\n    let self = this;\n    if (self.location) {\n      self.getForecast(self.location);\n    }\n    this.databaseService.getJson(CONFIG.METRICS).then(data => {\n      if (data === null) {\n        self.databaseService.setJson(CONFIG.METRICS, DEFAULT_METRICS);\n        self.metrics = DEFAULT_METRICS;\n      } else {\n        self.metrics = data;\n      }\n    });\n  }\n\n  getForecast(location: Location) {\n    let self = this;\n    this.forecastSubscriber = self.forecastService.getForecast(location)\n      .subscribe((data: Forecast) => {\n        self.forecast = data;\n        if (self.forecast && self.forecast.daily && self.forecast.daily.data) {\n          self.todayForecast = self.forecast.daily.data[0];\n        }\n        self.hourlyArray = [];\n        let currentHour = self.utilService.getCurrentHour(self.forecast.timezone);\n        let flag = false;\n        _.forEach(self.forecast.hourly.data, (obj: DataPoint) => {\n          if (!flag && self.utilService.epochToHour(obj.time, self.forecast.timezone) < currentHour) {\n            return;\n          }\n          flag = true;\n          self.hourlyArray.push({\n            time: obj.time,\n            icon: obj.icon,\n            temperature: obj.temperature\n          });\n          if (self.hourlyArray.length > 10) {\n            return false;\n          }\n        });\n      }, err => {\n        console.error(err);\n      });\n  }\n\n  ngOnDestroy() {\n    this.destroy();\n  }\n\n  destroy() {\n    if (this.forecastSubscriber) {\n      this.forecastSubscriber.unsubscribe();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/weather-list/weather-list.ts","import { Component, EventEmitter } from '@angular/core';\nimport { IonicPage, ModalController } from 'ionic-angular';\nimport { CONFIG, DatabaseService, Location } from '../../providers';\n\n@IonicPage({\n  priority: 'high'\n})\n@Component({\n  selector: 'page-home-weather',\n  templateUrl: 'home-weather.html'\n})\nexport class HomeWeatherPage {\n  onInitEmitter: EventEmitter<string>;\n  onDestroyEmitter: EventEmitter<string>;\n  location: Location;\n\n  constructor(public databaseService: DatabaseService,\n              public modalCtrl: ModalController) {\n    this.onInitEmitter = new EventEmitter<string>();\n    this.onDestroyEmitter = new EventEmitter<string>();\n  }\n\n  ionViewWillEnter() {\n    let self = this;\n    this.databaseService.getJson(CONFIG.HOME_LOCATION).then(data => {\n      if (data === null) {\n        let modal = self.modalCtrl.create('LocationPage', { heading: 'Enter Home City', showCancel: false });\n        modal.onDidDismiss((data: Location) => {\n          console.debug('page > modal dismissed > data > ', data);\n          if (data) {\n            self.databaseService.setJson(CONFIG.HOME_LOCATION, data);\n            self.location = data;\n            self.emitInit();\n          }\n        });\n        modal.present();\n      } else {\n        self.location = data;\n        self.emitInit();\n      }\n    });\n  }\n\n  emitInit() {\n    if (this.onInitEmitter) {\n      this.onInitEmitter.emit('');\n    }\n  }\n\n  ionViewWillLeave() {\n    if (this.onDestroyEmitter) {\n      this.onDestroyEmitter.emit('');\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home-weather/home-weather.ts"],"sourceRoot":""}